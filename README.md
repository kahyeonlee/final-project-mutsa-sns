<div align="center">
<h1> <a href="https://antique-almandine-653.notion.site/Mutsa-SNS-eed83a8aef6c4f20b26b76ed4a3b6e8b"> Mutsa - SNS ğŸ’¬</a></h1>
</div>

### ë©‹ì‚¬ìŠ¤ë„¤ìŠ¤(mustsa-SNS) ê°œì¸ í”„ë¡œì íŠ¸
****
`mutsaSNS(ë©‹ì‚¬ìŠ¤ë„¤ìŠ¤) í”„ë¡œì íŠ¸`ëŠ” ë¡œê·¸ì¸, ê¸€ì“°ê¸°, ìˆ˜ì •, ì‚­ì œ, í”¼ë“œê¸°ëŠ¥(í˜ì´ì§•), ëŒ“ê¸€, ì¢‹ì•„ìš”, ì•Œë¦¼ ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆëŠ” snsì…ë‹ˆë‹¤.

<br>

### ğŸ’» ê°œë°œí™˜ê²½
***
- **ì—ë””í„°** : Intellij Ultimate
- **ê°œë°œ íˆ´** : SpringBoot 2.7.5
- **ìë°”** : JAVA 11
- **ë¹Œë“œ** : Gradle 6.8
- **ì„œë²„** : AWS EC2
- **ë°°í¬** : Docker
- **ë°ì´í„°ë² ì´ìŠ¤** : MySql 8.0
- **í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬** : SpringBoot Web, MySQL, Spring Data JPA, Lombok, Spring Security

<br>

### ğŸ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ëŠë‚€ ì 
*** 
#### 1ì£¼ì°¨ ë¯¸ì…˜ ìˆ˜í–‰ ì‹œ
- í”„ë¡œì íŠ¸ì—ì„œ `Test ì½”ë“œ ì‘ì„±`ì„ ì—°ìŠµ,ì ìš©í•˜ë ¤ê³  ë…¸ë ¥í•˜ì˜€ê³  íšŒì› ì¸ì¦, ì¸ê°€ ê¸°ëŠ¥ì— Admin ê¸°ëŠ¥ì„ ì¶”ê°€í• ë•Œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ëŒë ¤ë³´ë©´ì„œ  `unit í…ŒìŠ¤íŠ¸`ë¥¼ í•  ìˆ˜ ìˆì–´ì„œ swaggerì—ì„œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì‹¤í–‰ ì‹œê°„ì„ ì¤„ì¼ ìˆ˜ ìˆì„êº¼ ê°™ìŠµë‹ˆë‹¤.
- GitLabì„ í†µí•´ì„œ `CI/CDë¥¼ ì ìš©`í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. `ë°°í¬ ìŠ¤í¬ë¦½íŠ¸`ë¥¼ ë§Œë“¤ê³  ì ìš©í•˜ëŠ”ë° ì–´ë ¤ì›€ì„ ê²ªê¸´ í–ˆì§€ë§Œ  ìˆ˜ì •ì‚¬í•­ì´ ìƒê¸¸ë•Œë§ˆë‹¤ ë°°í¬ ì‘ì—…ì„ ì•ˆí•´ë„ ë˜ì„œ ë°˜ë³µ ì‘ì—…ì„ ì—…ì•¨  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
- `ë³´ì™„í•´ì•¼ í•  ì `
  1. log ì°ì–´ì„œ í™•ì¸í•˜ëŠ” ìŠµê´€
  2. ì£¼ì„ ì²˜ë¦¬(íŒ€ í”„ë¡œì íŠ¸ ì§„í–‰ì‹œ ì½”ë“œ ì„¤ëª…)

#### 2ì£¼ì°¨ ë¯¸ì…˜ ìˆ˜í–‰ ì‹œ
- íŒ€ì›ê³¼ ì½”ë“œë¦¬ë·°ë¥¼ í†µí•´ì„œ ë¦¬ë·° ë°›ì•˜ë˜ ë¶€ë¶„ì¸ ë©”ì„œë“œì´ë¦„ì„ ëª…í™•í•˜ê²Œ ì“°ê³   `controller`ì—ì„œ ì½”ë“œë¥¼ ìµœëŒ€í•œ ì¤„ì´ê³  `service`ì—ì„œ í•´ê²°ì„ í•˜ë„ë¡ í•˜ì—¬ ì½”ë“œ ê°€ë…ì„±ì„ ë†’ì´ë ¤ê³  ë…¸ë ¥í•˜ì˜€ìŠµë‹ˆë‹¤.
- `soft delete`ë¥¼ ì‚¬ìš©í•´ì„œ ì‹¤ë¬´ì—ì„œ ì“°ëŠ” ê±°ì²˜ëŸ¼ DBì—ì„œ ì™„ì „ ì‚­ì œë¥¼ ë°©ì§€í•  ìˆ˜ ìˆì–´ì„œ í¥ë¯¸ë¡œì› ë‹¤. 
- `cascade`/`orphanRemoval`ì„ ì ìš©í•˜ì—¬ FK ì ìš©ëœ ë°ì´í„° ì‚­ì œ ì²˜ë¦¬ë¥¼ ì ìš©í•´ë´ì„œ ìƒˆë¡œìš´ ë¶€ë¶„ì„ ê³µë¶€í•˜ê²Œ ë˜ì–´ì„œ ì¢‹ì•˜ìŠµë‹ˆë‹¤.
- `ë³´ì™„í•´ì•¼í•  ì `
  1. spring-security testì— ëŒ€í•´ì„œ ê³µë¶€


<br>

### ğŸ“Œì²´í¬ë¦¬ìŠ¤íŠ¸
****
####  AWS EC2ì— Docker ë°°í¬
- [x] AWS EC2 t3.small ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
- [x] ì¸ìŠ¤í„´ìŠ¤ì— Docker ì„¤ì¹˜
####  [Gitlab CI & Crontab CD](https://velog.io/@gmeoq/series/GitLAb)
- [x] GitLabì— ìƒˆ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°
- [x] Dockerfile ìƒì„±
- [x] íŒŒì´í”„ë¼ì¸ ìƒì„±
- [x] Dockerì— pull,run
- [x] ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ë§Œë“¤ê¸°
- [x] Crontab ì‚¬ìš©
#### [Swagger](http://ec2-3-34-130-47.ap-northeast-2.compute.amazonaws.com:8080/swagger-ui/#/)
- [x] [Swagger ì˜ì¡´ì„± ì¶”ê°€](https://velog.io/@gmeoq/SpringBoot-Swagger-%EC%A0%81%EC%9A%A9)
- [x] .yml íŒŒì¼ ìˆ˜ì •
- [x] SwaggerConfiguration ìƒì„±
- [x] [swaggerConfig Custom](https://velog.io/@gmeoq/swagger-custom%ED%95%98%EA%B8%B0)

<br>

### ğŸ“ ê¸°ëŠ¥ ì •ì˜ì„œ
*******
#### íšŒì› ì¸ì¦,ì¸ê°€
- ìœ ì €ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê¸°ì…í•˜ê³  íšŒì›ê°€ì… , ìœ ì €ì´ë¦„ ì¤‘ë³µì‹œ custom exception ë°œìƒ
- ë¡œê·¸ì¸ì‹œ, token ë°œí–‰
#### ê²Œì‹œë¬¼ ë“±ë¡ ,ìˆ˜ì •, ì‚­ì œ, 1ê°œì¡°íšŒ, ë¦¬ìŠ¤íŠ¸
- ë¡œê·¸ì¸ í›„, ê²Œì‹œë¬¼ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥
- ë¹„íšŒì›ì´ê±°ë‚˜ ë¡œê·¸ì¸ì„ ì•ˆí•œ ê²½ìš°ì—ë„ ê²Œì‹œë¬¼ 1ê°œ ì¡°íšŒ, ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ ê¸°ëŠ¥ì€ ì‚¬ìš© ê°€ëŠ¥í•¨
- ê²Œì‹œë¬¼ ë“±ë¡ì€ 300ì ì´ë‚´ë¡œë§Œ ê°€ëŠ¥
- ê²Œì‹œë¬¼ ìˆ˜ì •, ì‚­ì œ ê¶Œí•œì€ ë³¸ì¸ì˜ ê²Œì‹œë¬¼ì¼ ë•Œë§Œ ê°€ëŠ¥
- ê²Œì‹œë¬¼ ë¦¬ìŠ¤íŠ¸ëŠ” í•œ í˜ì´ì§€ì— 20ê°œì”©ë§Œ ë³´ì´ë³´ë¡ í‘œì‹œ
#### ëŒ“ê¸€ ë“±ë¡, ìˆ˜ì •, ì‚­ì œ, ë¦¬ìŠ¤íŠ¸
- ë¡œê·¸ì¸ í›„, ëŒ“ê¸€ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ/ëª©ë¡ ê°€ëŠ¥
- ëŒ“ê¸€ ë“±ë¡ì€ 100ì ì´ë‚´ë¡œë§Œ ê°€ëŠ¥ 
- ëŒ“ê¸€ ìˆ˜ì •, ì‚­ì œ ê¶Œí•œì€ ë³¸ì¸ì´ ì‘ì„±í•œ ëŒ“ê¸€ì¼ ê²½ìš°ì—ë§Œ ê°€ëŠ¥
#### ë§ˆì´í”¼ë“œ
- ë‚´ê°€ ì‘ì„±í•œ ê¸€ë§Œ ë³´ì´ëŠ” ê¸°ëŠ¥
- ëª©ë¡ ê¸°ëŠ¥ í˜ì´ì§• ì²˜ë¦¬, í”¼ë“œ ê°¯ìˆ˜ 20ê°œ
#### ì¢‹ì•„ìš”
- ë¡œê·¸ì¸ í›„ , ì¢‹ì•„ìš” ëˆ„ë¥¼ìˆ˜ ìˆëŠ” ê¸°ëŠ¥
- ì¤‘ë³µìœ¼ë¡œ ì¢‹ì•„ìš” ëˆ„ë¥´ëŠ” ê²½ìš°, custom exception ë°œìƒ
#### ì•ŒëŒ ëª©ë¡ ì¡°íšŒ
- ë‹¤ë¥¸ íšŒì›ì´ ì¢‹ì•„ìš”ë¥¼ ëˆ„ë¥´ê±°ë‚˜ ëŒ“ê¸€ì„ ì‘ì„±í•  ì‹œ ê²Œì‹œë¬¼ ì‘ì„±ìê°€ ì•ŒëŒëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥
- ì•ŒëŒ ì¡°íšŒëŠ” íšŒì›ë§Œ ê°€ëŠ¥

<br>

### ğŸ“‰ ERD Diagram
***
![](../../Pictures/ë©‹ì‚¬_erd.png)


<br>

### ğŸ’¡ EndPoint 
***

| **no** | **êµ¬ë¶„** | **ê¸°ëŠ¥** | **Method** | **URI** |
| --- | --- | --- | --- | --- |
| 1 | íšŒì› | íšŒì›ê°€ì… | POST  | /api/v1/users/join |
| 2 |  | ë¡œê·¸ì¸ | POST  | /api/v1/users/login |
| 3 | í¬ìŠ¤íŠ¸ | ê²Œì‹œë¬¼ ë“±ë¡ | POST  | /api/v1/posts |
| 4 |  | ê²Œì‹œë¬¼ ì‚­ì œ | DELETE | /api/v1/posts/{id} |
| 5 |  | ê²Œì‹œë¬¼ ìˆ˜ì • | PUT | /api/v1/posts/{id} |
| 6 |  | ê²Œì‹œë¬¼ 1ê°œ ì¡°íšŒ | GET | /api/v1/posts/{id} |
| 7 |  | ê²Œì‹œë¬¼ ëª©ë¡ ì¡°íšŒ | GET |  /api/v1/posts |
| 8 | ëŒ“ê¸€ | ëŒ“ê¸€ ë“±ë¡ | POST  | /api/v1/posts/{postsId}/comments |
| 9 |  | ëŒ“ê¸€ ì‚­ì œ | DELETE | /api/v1/posts/{postsId}/comments/{id} |
| 10 |  | ëŒ“ê¸€ ìˆ˜ì • | PUT | /api/v1/posts/{postId}/comments/{id} |
| 11 |  | ëŒ“ê¸€ ëª©ë¡ ì¡°íšŒ | GET | /api/v1/posts/{postId}/comments |
| 12 | ì¢‹ì•„ìš” | ì¢‹ì•„ìš” ëˆŒë¥´ê¸° | POST  | /api/v1/posts/{postId}/likes |
| 13 |  | ì¢‹ì•„ìš”  ì¹´ìš´íŠ¸ | GET | /api/v1/posts/{postsId}/likes |
| 14 | ë§ˆì´í”¼ë“œ | ë§ˆì´í”¼ë“œ ì¡°íšŒ | GET | /api/v1/posts/my |
| 15 | ì•Œë¦¼ | ì•Œë¦¼ ì¡°íšŒ | GET |  /api/v1/alarms |

<br>

### ğŸ“² URI ì…ë ¥/ ë°˜í™˜ê°’
******
#### **1. íšŒì›ê°€ì… - POST /api/v1/users/join**

- ì…ë ¥
```json
  "password": "1234",
  "userName": "gh"
```
- ê²°ê³¼
```json
{
  "resultCode": "SUCCESS",
  "result": {
    "id": 9,
    "userName": "gh"
  }
}

```
#### **2. ë¡œê·¸ì¸ - POST /api/v1/users/login**
- ì…ë ¥
```json
  "password": "1234",
  "userName": "gh"
```
- ê²°ê³¼
```json
{
  "resultCode": "SUCCESS",
  "result": {
    "jwt": "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyTmFtZSI6ImdoIiwiaWF0IjoxNjcyMDE3MjM4LCJleHAiOjE2NzIwMzUyMzh9.PcSlsqu0jNvf67laXgD9WdK0Gv0NMWAy18tfNkr5DTE"
  }
}
```
#### **3. í¬ìŠ¤íŠ¸ ì‘ì„± - POST /api/v1/posts**
- ì…ë ¥
```json
{
  "body": "hi. it's me",
  "title": "hi"
}
```
- ê²°ê³¼
```json
{
  "resultCode": "SUCCESS",
  "result": {
    "postId": 18,
    "message": "í¬ìŠ¤íŠ¸ ë“±ë¡ ì™„ë£Œ"
  }
}
```
#### **4. í¬ìŠ¤íŠ¸ ìˆ˜ì • - PUT /api/v1/posts/{id}**
- ì…ë ¥ (ë§¤ê°œë³€ìˆ˜ë¡œ postId)
```json
{
  "body": "hello. it's me",
  "title": "hello"
}
```
- ê²°ê³¼
```json
{
  "resultCode": "SUCCESS",
  "result": {
    "postId": 18,
    "message": "í¬ìŠ¤íŠ¸ ìˆ˜ì • ì™„ë£Œ"
  }
}
```
#### **5. í¬ìŠ¤íŠ¸ ì‚­ì œ - DELETE /api/v1/posts/{postId}**
- ì…ë ¥(ë§¤ê°œë³€ìˆ˜ë¡œ postID)
- ê²°ê³¼
```json
{
  "resultCode": "SUCCESS",
  "result": {
    "postId": 18,
    "message": "í¬ìŠ¤íŠ¸ ì‚­ì œ ì™„ë£Œ"
  }
}
```
#### **6. í¬ìŠ¤íŠ¸ 1ê°œ ì¡°íšŒ(ìƒì„¸) - GET /api/v1/posts/{postId}**
- ì…ë ¥(ë§¤ê°œë³€ìˆ˜ë¡œ postID)
- ê²°ê³¼
```json
{
  "resultCode": "SUCCESS",
  "result": {
    "id": 18,
    "title": "hello",
    "body": "hello. it's me",
    "userName": "gh",
    "createdAt": "2022-12-26T10:17:37.933636",
    "lastModifiedAt": "2022-12-26T10:19:24.281174"
  }
}
```
#### **7. í¬ìŠ¤íŠ¸ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ - GET /api/v1/posts**
- ê²°ê³¼
```json
{
  "resultCode": "SUCCESS",
  "result": {
    "content": [
      {
        "id": 18,
        "title": "hello",
        "body": "hello. it's me",
        "userName": "gh",
        "createdAt": "2022-12-26 10:17:37",
        "lastModifiedAt": "2022-12-26 10:19:24"
      },
      {
        "id": 17,
        "title": "hi",
        "body": "hi. it's me",
        "userName": "gh",
        "createdAt": "2022-12-26 10:17:36",
        "lastModifiedAt": "2022-12-26 10:17:36"
      },
      {
        "id": 16,
        "title": "hello-title",
        "body": "hello-body",
        "userName": "kyeongrok27",
        "createdAt": "2022-12-26 00:54:53",
        "lastModifiedAt": "2022-12-26 00:54:53"
      }
    ],
    "pageable": {
      "sort": {
        "empty": false,
        "sorted": true,
        "unsorted": false
      },
      "offset": 0,
      "pageNumber": 0,
      "pageSize": 20,
      "paged": true,
      "unpaged": false
    },
    "last": true,
    "totalElements": 15,
    "totalPages": 1,
    "size": 20,
    "number": 0,
    "sort": {
      "empty": false,
      "sorted": true,
      "unsorted": false
    },
    "first": true,
    "numberOfElements": 15,
    "empty": false
  }
}
```
#### **8. ëŒ“ê¸€ ì‘ì„± - POST /api/v1/posts/{postsId}/comments**
- ì…ë ¥í¼ (JSON í˜•ì‹)
```json
{
	"comment" : "comment test4"
}
```
- ë¦¬í„´ (JSON í˜•ì‹)
```json
{
	"resultCode": "SUCCESS",
	"result":{
		"id": 4,
		"comment": "comment test4",
		"userName": "test",
		"postId": 2,
		"createdAt": "2022-12-20T16:15:04.270741"
	}
}
```

#### **9. ëŒ“ê¸€  ìˆ˜ì • - PUT /api/v1/posts/{postId}/comments/{id}**
- ì…ë ¥í¼ (JSON í˜•ì‹)
```json
{
  "comment" : "modify comment"
}
```
- ë¦¬í„´ (JSON í˜•ì‹)
```json
{
  "resultCode": "SUCCESS",
  "result":{
    "id": 4,
    "comment": "modify comment",
    "userName": "test",
    "postId": 2,
    "createdAt": "2022-12-20T16:15:04.270741",
    "lastModifiedAt": "2022-12-23T16:15:04.270741"
  }
}
```
#### **10. ëŒ“ê¸€  ì‚­ì œ - DELETE /api/v1/posts/{postId}/comments/{id}**
- ë¦¬í„´ (JSON í˜•ì‹)
```json
{
  "resultCode": "SUCCESS",
  "result":{
    "message": "ëŒ“ê¸€ ì‚­ì œ ì™„ë£Œ",
    "id": 4
  }
}
```
#### **11. ëŒ“ê¸€ ëª©ë¡ ì¡°íšŒ - DELETE /api/v1/posts/{postId}/comments/{id}**
- ë¦¬í„´ (JSON í˜•ì‹)
```json
{
  "resultCode": "SUCCESS",
  "result":{
    "content":[
      {
        "id": 3,
        "comment": "comment test3",
        "userName": "test",
        "postId": 2,
        "createdAt": "2022-12-20T16:07:25.699346"
      },
      {
        "id": 2,
        "comment": "comment test2",
        "userName": "test",
        "postId": 2,
        "createdAt": "2022-12-20T16:03:30.670768"
      }
    ],
    "pageable":{"sort":{"empty": false, "sorted": true, "unsorted": false },
      "offset": 0,â€¦},
    "last": true,
    "totalPages": 1,
    "totalElements": 2,
    "size": 10,
    "number": 0,
    "sort":{
      "empty": false,
      "sorted": true,
      "unsorted": false
    },
    "numberOfElements": 2,
    "first": true,
    "empty": false
  }
}
```
#### **12. ì¢‹ì•„ìš” ëˆ„ë¥´ê¸° - POST  /api/v1/posts/{postId}/likes**
- ë¦¬í„´ (JSON í˜•ì‹)
```json
{
	"resultCode":"SUCCESS",
    "result": "ì¢‹ì•„ìš”ë¥¼ ëˆŒë €ìŠµë‹ˆë‹¤."
}
```
#### **13. ì¢‹ì•„ìš” ìˆ˜ count - GET  /api/v1/posts/{postId}/likes**
- ë¦¬í„´ (JSON í˜•ì‹)
```json
{
  "resultCode":"SUCCESS",
  "result": 0
}
```
#### **14. ë§ˆì´í”¼ë“œ ì¡°íšŒ - GET  /api/v1/posts/my**
- ë¦¬í„´ (JSON í˜•ì‹)
```json
{
  "resultCode": "SUCCESS",
  "result":{
    "content":[
      {
        "id": 4,
        "title": "test",
        "body": "body",
        "userName": "test",
        "createdAt": "2022-12-16T16:50:37.515952"
      }
    ],
    "pageable":{
      "sort":{"empty": true, "sorted": false, "unsorted": true }, "offset": 0,â€¦},
    "last": true,
    "totalPages": 1,
    "totalElements": 1,
    "size": 20,
    "number": 0,
    "sort":{
      "empty": true,
      "sorted": false,
      "unsorted": true
    },
    "numberOfElements": 1,
    "first": true,
    "empty": false
  }
```
#### **15. ì•Œë¦¼ ëª©ë¡ ì¡°íšŒ - GET  /api/v1/alarms**
- ë¦¬í„´ (JSON í˜•ì‹)
```json
{
	"resultCode":"SUCCESS",
  "result": {
	"content":
	[
		{
	      "id": 1,
	      "alarmType": "NEW_LIKE_ON_POST",
        "fromUserId": 1,
        "targetId": 1,
	      "text": "new like!",
	      "createdAt": "2022-12-25T14:53:28.209+00:00",
	  }
	]
	}
}
```